#!/usr/bin/env php
<?php

use Essential\Cli\Application;
use Essential\Cli\CommandRegistry;
use Essential\Cli\Commands\HelpCommand;
use Essential\Cli\Commands\VersionCommand;
use Composer\InstalledVersions;

require __DIR__ . '/../vendor/autoload.php';
require __DIR__ . '/../../../autoload.php'; 

$packageName = 'essential/framework';
$version = InstalledVersions::getPrettyVersion($packageName) ?? 'dev';
$rootPackage = InstalledVersions::getRootPackage();

$registry = new CommandRegistry();

$registry->register(new HelpCommand($registry));
$registry->register(new VersionCommand(
    $packageName,
    $version,
    'https://github.com/ViniciusDeSenna/essential-framework'
));

$app = new Application($registry);

exit($app->run($argv));