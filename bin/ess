#!/usr/bin/env php
<?php

use Essential\Cli\Application;
use Essential\Cli\CommandRegistry;
use Essential\Cli\Commands\HelpCommand;
use Essential\Cli\Commands\VersionCommand;

require __DIR__ . '/../vendor/autoload.php';

$composer = json_decode(file_get_contents(__DIR__ . '/../composer.json'), true);

$registry = new CommandRegistry();

$registry->register(new HelpCommand($registry));
$registry->register(new VersionCommand(
    $composer['name'],
    $composer['version'],
    $composer['homepage'] ?? ''
));

$app = new Application($registry);

exit($app->run($argv));